1,参与批管理但没有类型
SELECT * FROM PDM_MATERIAL T WHERE T.IS_LOT_CONTROL = 'Y' AND T.LOT_TYPE NOT IN ('SERIAL', 'BATCH', 'MATERIAL')

2,重复定义物料
SELECT MATERIAL_ID FROM LOADER_PDM_MATERIAL M GROUP BY M.MATERIAL_ID HAVING COUNT(*) >= 2

3,生产物料没有工艺或工艺不对
SELECT * FROM PDM_MATERIAL M WHERE M.IS_PRODUCT = 'Y' AND M.PROCESS_NAME IS NULL;
SELECT * FROM PDM_MATERIAL M
 WHERE M.IS_PRODUCT = 'Y' AND M.PROCESS_NAME NOT IN  (SELECT W.NAME FROM WF_PROCESSDEFINITION W WHERE W.CLASS = 'P');


4,生产物料没有BOM
SELECT * FROM (SELECT * FROM PDM_MATERIAL WHERE IS_PRODUCT = 'Y') M
 WHERE NOT EXISTS (SELECT 1 FROM V_PDM_BOM B WHERE M.OBJECT_RRN = B.MATERIAL_PARENT_RRN)

5,采购物料没有主供应商
SELECT * FROM (SELECT * FROM PDM_MATERIAL WHERE IS_PURCHASE = 'Y') M
 WHERE NOT EXISTS (SELECT 1 FROM VDM_VENDOR_MATERIAL B WHERE M.OBJECT_RRN = B.MATERIAL_RRN AND B.IS_PRIMARY = 'Y')

6,BOM循环嵌套
 判断是否循环
 SELECT COUNT(*) FROM V_PDM_BOM T
 CONNECT BY PRIOR T.MATERIAL_CHILD_RRN = T.MATERIAL_PARENT_RRN
 ORDER SIBLINGS BY SEQ_NO, MATERIAL_CHILD_ID 

 检查哪个循环
 SELECT * FROM (SELECT T.*, CONNECT_BY_ISCYCLE CYCLE FROM V_PDM_BOM T
 CONNECT BY NOCYCLE PRIOR T.MATERIAL_CHILD_RRN = T.MATERIAL_PARENT_RRN
 ORDER SIBLINGS BY SEQ_NO, MATERIAL_CHILD_ID) S
 WHERE CYCLE = 1
